<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Minimal JSQMessagesViewController Using Swift 3</title>
  <meta name="description" content="I actively contribute to JSQMessagesViewController an Open Source Project that makes it super easy to get a “iMessages” like feature into your app. I like to...">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/jekyll/update/2016/11/20/JSQMessagesViewController-Swift-3-Demo.html">
  <link rel="alternate" type="application/rss+xml" title="OverrideFunc" href="/feed.xml">
  
  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">

    <a class="site-title" href="/">OverrideFunc</a>

    <nav class="site-nav">
      <span class="menu-icon">
        <svg viewBox="0 0 18 15" width="18px" height="15px">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </span>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Minimal JSQMessagesViewController Using Swift 3</h1>
    <p class="post-meta"><time datetime="2016-11-20T15:46:28-07:00" itemprop="datePublished">Nov 20, 2016</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I actively contribute to JSQMessagesViewController an Open Source Project that makes it super easy to get a “iMessages” like feature into your app. I like to keep up on the questions on <a href="http://stackoverflow.com/questions/tagged/jsqmessagesviewcontroller">stackoverflow</a> in regard to this. Often the first step is the hardest. Many users have different levels of experience, education and understanding and Since I am a Swift Nut we will exospore implementing it in Swift.</p>

<p>So I will outline the minimum you have to do to get this up and running.</p>

<h3>Step 1. Create Your project.</h3>
<p>I am not going to go into much detail about this.
Open Xcode.
Go to File -&gt; New Project.
Select single view application.
Give your project a name and save.</p>

<h3>Step 2. Adding [Cocoapods] to your computer</h3>
<h4>if you already have [Cocoapods][cocoapods] you can skip this step.</h4>

<p><a href="https://cocoapods.org/">Cocoapods</a> CocoaPods is a dependency manager for Swift and Objective-C Cocoa projects. It has over 25 thousand libraries and is used in over 1.2 million apps.</p>

<p>To install cocoapods open up <code class="highlighter-rouge">terminal</code>
you can use the “Spotlite” Shortcut which is <code class="highlighter-rouge">Command + SpaceBar</code> and then type <code class="highlighter-rouge">Terminal</code> or just open it from finder -&gt; <code class="highlighter-rouge">/Applications/Utilities/Terminal.app</code>
simply type this command in and <a href="https://cocoapods.org/">cocoapods</a> will be installed</p>

<figure class="highlight"><pre><code class="language-linenos" data-lang="linenos"> sudo gem install cocoapods</code></pre></figure>

<p>Once this has complete you need to navigate to your projects directory(folder). You can open Folders by using the command <code class="highlighter-rouge">cd path/to/file</code> and you can back out of folders with the command <code class="highlighter-rouge">..</code> but instead of navigating one folder at a time lets just open terminal type <code class="highlighter-rouge">cd </code> and then drag our project from the finder window onto the terminal window. This will print out the path to the project for us. Hit enter and you are now at your projects base directory.</p>

<h3>Step 3. Adding [cocoapods][cocoapods] to your project</h3>
<p>Now that you are at your base directory just type</p>

<figure class="highlight"><pre><code class="language-linenos" data-lang="linenos">pod init</code></pre></figure>

<p>This creates a podfile for you. This is where you can manage cocoapods that you incorporate in your app. So Open that file up in any text editor you prefer.</p>
<h3>Step 4. Adding JSQMessagesViewController to your project</h3>
<p>This is the bear minimum you need to have in your podfile.</p>

<figure class="highlight"><pre><code class="language-linenos" data-lang="linenos">#if you're using Swift
 use_frameworks!

target 'YourProjectName' do
  pod 'JSQMessagesViewController'
end</code></pre></figure>

<p>Save your file and close it. Now back in terminal type: <code class="highlighter-rouge">pod install</code> This will add the JSQMessagesViewController library to your project.</p>

<h3>Step 5. Open Workspace</h3>
<p>Pods do an interesting thing where they manage the configuration of your project for you so you do not have to. The way that they do this is by generating a <code class="highlighter-rouge">.workspace</code> for you. So if you had your project open in <code class="highlighter-rouge">XCode</code> previously, Close it and open the <code class="highlighter-rouge">YourProjectName.workspace</code> file that was generated.</p>

<p>At this point you should be able to hit run and your project builds. You will not see anything because we have not added anything yet but you should not have any build errors.</p>

<h2>Step 6. Adding JSQMessagesViewController to your project</h2>
<p>Now lets code, modify the UIViewController that comes with crating a new project.</p>

<p>Here is the minimum amount of code you need in this file.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></td><td class="code"><pre><span class="c1">//</span>
<span class="c1">//  ChatViewController.swift</span>
<span class="c1">//  SwiftExample</span>
<span class="c1">//</span>
<span class="c1">//  Created by Dan Leonard on 12/2/16.</span>
<span class="c1">//  Copyright © 2016 MacMeDan. All rights reserved.</span>
<span class="c1">//</span>

<span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">JSQMessagesViewController</span>

<span class="kd">class</span> <span class="kt">ChatViewController</span><span class="p">:</span> <span class="kt">JSQMessagesViewController</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">messages</span> <span class="o">=</span> <span class="p">[</span><span class="kt">JSQMessage</span><span class="p">]()</span>
  <span class="k">let</span> <span class="nv">defaults</span> <span class="o">=</span> <span class="kt">UserDefaults</span><span class="o">.</span><span class="n">standard</span>
  <span class="k">var</span> <span class="nv">conversation</span><span class="p">:</span> <span class="kt">Conversation</span> <span class="o">=</span> <span class="nf">makeConversation</span><span class="p">()</span> <span class="c1">// Here is where your messages are added.</span>
  <span class="k">var</span> <span class="nv">incomingBubble</span><span class="p">:</span> <span class="kt">JSQMessagesBubbleImage</span><span class="o">!</span>
  <span class="k">var</span> <span class="nv">outgoingBubble</span><span class="p">:</span> <span class="kt">JSQMessagesBubbleImage</span><span class="o">!</span>
  <span class="k">var</span> <span class="nv">displayName</span><span class="p">:</span> <span class="kt">String</span><span class="o">!</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        <span class="n">incomingBubble</span> <span class="o">=</span> <span class="kt">JSQMessagesBubbleImageFactory</span><span class="p">()</span><span class="o">.</span><span class="nf">incomingMessagesBubbleImage</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="kt">UIColor</span><span class="o">.</span><span class="nf">jsq_messageBubbleBlue</span><span class="p">())</span>
        <span class="n">outgoingBubble</span> <span class="o">=</span> <span class="kt">JSQMessagesBubbleImageFactory</span><span class="p">()</span><span class="o">.</span><span class="nf">outgoingMessagesBubbleImage</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="kt">UIColor</span><span class="o">.</span><span class="n">lightGray</span><span class="p">)</span>

        <span class="n">collectionView</span><span class="p">?</span><span class="o">.</span><span class="n">collectionViewLayout</span><span class="o">.</span><span class="n">incomingAvatarViewSize</span> <span class="o">=</span> <span class="o">.</span><span class="n">zero</span>
        <span class="n">collectionView</span><span class="p">?</span><span class="o">.</span><span class="n">collectionViewLayout</span><span class="o">.</span><span class="n">outgoingAvatarViewSize</span> <span class="o">=</span> <span class="o">.</span><span class="n">zero</span>

    <span class="k">self</span><span class="o">.</span><span class="n">collectionView</span><span class="p">?</span><span class="o">.</span><span class="nf">reloadData</span><span class="p">()</span>
    <span class="k">self</span><span class="o">.</span><span class="n">collectionView</span><span class="p">?</span><span class="o">.</span><span class="nf">layoutIfNeeded</span><span class="p">()</span>
  <span class="p">}</span>

  <span class="c1">// MARK: JSQMessages CollectionView DataSource</span>
  <span class="k">override</span> <span class="kd">func</span> <span class="nf">senderId</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">"1"</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">senderDisplayName</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">displayName</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">collectionView</span><span class="p">(</span><span class="n">_</span> <span class="nv">collectionView</span><span class="p">:</span> <span class="kt">UICollectionView</span><span class="p">,</span> <span class="n">numberOfItemsInSection</span> <span class="nv">section</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">messages</span><span class="o">.</span><span class="n">count</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">collectionView</span><span class="p">(</span><span class="n">_</span> <span class="nv">collectionView</span><span class="p">:</span> <span class="kt">JSQMessagesCollectionView</span><span class="p">,</span> <span class="n">messageDataForItemAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">JSQMessageData</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">messages</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">item</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">collectionView</span><span class="p">(</span><span class="n">_</span> <span class="nv">collectionView</span><span class="p">:</span> <span class="kt">JSQMessagesCollectionView</span><span class="p">,</span> <span class="n">messageBubbleImageDataForItemAt</span> <span class="nv">indexPath</span><span class="p">:</span> <span class="kt">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">JSQMessageBubbleImageDataSource</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">messages</span><span class="p">[</span><span class="n">indexPath</span><span class="o">.</span><span class="n">item</span><span class="p">]</span><span class="o">.</span><span class="n">senderId</span> <span class="o">==</span> <span class="k">self</span><span class="o">.</span><span class="nf">senderId</span><span class="p">()</span> <span class="p">?</span> <span class="nv">outgoingBubble</span> <span class="p">:</span> <span class="n">incomingBubble</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">makeConversation</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">JSQMessages</span><span class="p">]</span> <span class="p">{</span>
    <span class="c1">// This is just for demo purposes, if you add more messages to this array they will appear in your conversation feed.</span>
    <span class="k">return</span> <span class="p">[</span><span class="kt">JSQMessage</span><span class="p">(</span><span class="nv">senderId</span><span class="p">:</span> <span class="s">"053496-4509-288"</span><span class="p">,</span> <span class="nv">displayName</span><span class="p">:</span> <span class="s">"Dan leonard"</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="s">"Check out this awesome library called JSQMessagesViewController"</span><span class="p">)]</span>
  <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>The last function in this code sip-pit is not required is is just a helper to show how you can add messages to your feed.</p>

<p>That’s it, The minimum amount of code you need to get a chat feature in your own app. There are tons of things that you can do to add more functionality but we will save that for another time. For this tutorial I will leave it here. Don’t be afraid to explore and change things. That is how I learn best.</p>


    
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="http://localhost:4000/jekyll/update/2016/11/20/JSQMessagesViewController-Swift-3-Demo.html" data-width="300" data-numposts="5"></div>

  </div>
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">OverrideFunc</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>
            
              OverrideFunc
            
            </li>
            
            <li><a href="mailto:pdanielleonard@gmail.com">pdanielleonard@gmail.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/macmedan"><span class="icon icon--github"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">macmedan</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/macmedan"><span class="icon icon--twitter"><svg viewBox="0 0 16 16" width="16px" height="16px"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">macmedan</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Dan Leonard is an exsperienced iOS Devleoper. Passions include software as well as hardware. Often found building things in his garage. Loves Open Source and Swift on Lunix.
</p>
      </div>
    </div>

  </div>

</footer>

  </body>
</html>
